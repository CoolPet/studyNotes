<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>3.Map</title>
</head>
<body>
  <script>
    // 构造函数方法创建一个 Map 实例
    // new Map([[key, value], [key, value], ...])
    // 参数是一个数组,数组每一项也是一个数组,每一个数组都有两个值,一个是 key,一个是 value
    // 一个对象属性名必须是字符串,如果写的不是字符串也默认转为字符串
    // Map 实例的 key 可以是任意数据类型
    // Map 实例中的属性名不可以重复,否则会自动去重
    // size:键值对的个数
    let map = new Map([[1, "Jack"], [2, "Tom"], [3, {name: "Rose"}], [4, [1, 2]]])
    console.log(map)    // Map(4) {1 => "Jack", 2 => "Tom", 3 => {name: "Rose"}, 4 => Array(2) [1, 2]}

    // Map 中 get() 方法:根据 key 获取 value
    console.log(map.get(1))   // Jack

    // Map 中 set() 方法:可以向 Map 对象添加新元素
    // Map.set(key, value)
    // 如果之前有过相同的 key,就对它进行修改,没有的话增加一个新元素,返回新的 map 实例(可以实现链式写法)
    console.log(map.set(5, "Joho"))   // Map(5) {1 => "Jack", 2 => "Tom", 3 => {name: "Rose"}, 4 => Array(2) [1, 2], 5 => "Joho"}

    // Map 中 has() 方法:判断 key 有没有对应的 value 值,有就是 true,否则为 false
    console.log(map.has(1))   // true 

    // Map 中 delete() 方法:删除属性 key,返回值 true/false
    console.log(map.delete(1))    // true
    console.log(map)    // Map(4) {2 => "Tom", 3 => {name: "Rose"}, 4 => Array(2) [1, 2], 5 => "Joho"}

    // Map 中 clear() 方法:清空 Map 实例,没有返回值(undefined)
    console.log(map.clear())    // undefined
    console.log(map)    // Map(0) {}

    // Map 中 forEach() 方法:使用回调函数遍历每个成员
    map = new Map([[1, "Jack"], [2, "Tom"], [3, {name: "Rose"}], [4, [1, 2]]])
    map.forEach((value, key, input) => {
      console.log(key)    // key
      console.log(value)    // value
      console.log(input)    // map 实例
      /*
      * 1
      * Jack
      * Map(4) {1 => "Jack", 2 => "Tom", 3 => {name: "Rose"}, 4 => Array(2) [1, 2]}
      * 2
      * Tom
      * Map(4) {1 => "Jack", 2 => "Tom", 3 => {name: "Rose"}, 4 => Array(2) [1, 2]}
      * 3
      * {name: "Rose"}
      * Map(4) {1 => "Jack", 2 => "Tom", 3 => {name: "Rose"}, 4 => Array(2) [1, 2]}
      * 4
      * (2) [1, 2]
      * Map(4) {1 => "Jack", 2 => "Tom", 3 => {name: "Rose"}, 4 => Array(2) [1, 2]}
      */
    })

    // Map 中 keys() 方法:返回键名的遍历器
    for(let key of map.keys()){
      console.log(key)
      /*
      * 1
      * 2
      * 3
      * 4
      */
    }

    // Map 中 values() 方法:返回键值的遍历器
    for(let val of map.values()){
      console.log(val)
      /*
      * Jack
      * Tom
      * {name: "Rose"}
      * [1, 2]
      */
    }
    
    // Map 中 entries() 方法:返回键值对的遍历器
    for(let [key, value] of map.entries()){
      console.log(key, value)
      /*
      * 1 "Jack"
      * 2 "Tom"
      * 3 {name: "Rose"}
      * 4 [1, 2]
      */
    }

    // 将一个数组变成 Map 实例
    let arr = ["Jack", "JS", "CSS", 1, 2, "Vue"]
    let map1 = new Map()
    for(let [key, value] of arr.entries()){
      map1.set(key, value)
    }
    console.log(map1)   // Map(6) {0 => "Jack", 1 => "JS", 2 => "CSS", 3 => 1, 4 => 2, 5 => "Vue"}
  </script>
</body>
</html>